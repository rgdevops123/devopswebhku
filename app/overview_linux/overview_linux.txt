
TheTest-LINUX

configuration
performance
security
networking
packaging
mail
oneoffs
general

















configuration

Q: What are the default filesystems to install?

/                   10240      10GB
/boot             1024        1GB
swap             2048        2GB
/var                1024        1GB
/home           1024        1GB
/tmp             1024        1GB
/data             3072        3GB

Mail Servers:
  /var/spool



Q: How do you modify kernel parameters?

# vim /proc or /proc/sys/*
   OR
# vim /etc/sysctl.conf OR /etc/sysctl.d/99-example.conf
# sysctl -p    ### To update.
# sysctl -a    ### To check & confirm.



Q: How do you Enable IP Forwarding?

$ echo "net.ipv4.ip_forward = 1"|sudo tee /etc/sysctl.d/99-ipforward.conf
net.ipv4.ip_forward = 1

$ sudo sysctl -p /etc/sysctl.d/99-ipforward.conf
net.ipv4.ip_forward = 1



Q: What is the NFS server config file & contents

NFS: ServerIP: 10.0.0.3
server# vim /etc/exports
...
#/data/web   *(rw,sync)
/data/web    10.0.0.0/24(rw,sync)
...



Q: How do you restart NFS?

server# systemctl restart nfs



Q: How do you check what a server is exporting?

server# showmount -e 10.0.0.3
Export list for 10.0.0.3:
/data/web 10.0.0.0/24

 client# showmount -e 10.0.0.3
Export list for 10.0.0.3:
/data/web 10.0.0.0/24



Q: How do you make a directory?

client# mkdir /data/web



Q: How do you mount an NFS directory on a client?

client# mount -t nfs 10.0.0.3:/data/web /data/web

                   OR
A
client# vim /etc/fstab
Device.  Mount Point.  Filesystem Format.  Mount Options.   Dump Value.   Filesystem Check Order.
...
10.0.0.3:/data/web   /data/web   nfs   defaults   0   0
...

client# mount -a



Q: How do you check what filesystems are mounted?

client# df -h
Filesystem    Size    Used   Avail Use%    Mounted on
...
10.0.0.3:/data/web 2.9G 1.2G 1.7G 41% /data/web



Q: How do you list Kernel Modules?

- lsmod / modprobe 2XTAB ENT



Q: How do you install Kernel Modules?

- insmod / modprobe -a <mod>



Q: How do you remove Kernel Modules?

- rmmod / modprobe -r <mod>



Q: Where are kernel modules stored?

   '/lib/modules/kernel-version/



Q: How do you add a user?

# useradd -c "Jane York" -m jyork

-c: COMMENT
-m: Create the user's home directory if it does not exist.



Q: How do you create a system account with a specified home directory.

# useradd -r app1 -d /apps/app1
     Creates an "app1" user and an "/apps/app1" home directory.

-r, --system
           Create a system account.

           System users will be created with no aging information in
/etc/shadow, and their numeric identifiers are chosen in the
           SYS_UID_MIN-SYS_UID_MAX range, defined in /etc/login.defs,
instead of UID_MIN-UID_MAX (and their GID counterparts for the
           creation of groups).

           Note that useradd will not create a home directory for such
an user, regardless of the default setting in /etc/login.defs
           (CREATE_HOME). You have to specify the -m options if you
want a home directory for a system account to be created.

-d, --home-dir HOME_DIR
           The new user will be created using HOME_DIR as the value
for the user's login directory. The default is to append the LOGIN
           name to BASE_DIR and use that as the login directory name.



Q: How do you check SWAP space? 3 ways...

  # swapon -s
  # cat /proc/swaps
  # cat /proc/meminfo \
            | grep -i swap



Q: How do you create a SWAP space file?

  # dd if=/dev/zero of=/swap bs=1024k count=1024

  # mkswap /swap
  # swapon /swap
  # chmod 600 /swap

   # vi /etc/fstab
   /swap swap swap defaults 0 0

  # swapon -s    (To check.)



Q: How do you add a new pv, vg, lv & fs?


 # fdisk -l
 # fdisk /dev/sdc
 Command (m for help): l    (ELL/list partition types)
   82  Linux swap
   8e  Linux LVM
 Command (m for help): n    (add new partition)
 Command (m for help): p    (primary partition 1-4)
 Command (m for help): First Cylinder: 7067
 Command (m for help): Last Cylinder: +33G

 Command (m for help): p    (print the partition table)
 Command (m for help): d    (delete a partition)
 Command (m for help): t    (change a partition's system id)

 Command (m for help): w    (write table to disk)
 # partprobe
 # init 6
 # fdisk -l
 # pvcreate /dev/sdc1
 # vgcreate vg03 /dev/sdc1
 ### vgextend vg03 /dev/sdc1
 # lvcreate -L 10G -n data3 vg03
 # mkfs -t ext3 /dev/vg03/data3
 # mkdir /data3

 # vim /etc/fstab
 +++
 /dev/vg03/data3 /data3 ext3 defaults,usrquota,grpquota 1 2
 +++

# mount -a



Q: How can you view disk and LVM information?

 # fdisk -l
 # ssm list
 # pvdisplay
 # vgdisplay
 # lvdisplay



Q: How do you view free disk space:

# parted
> select /dev/sdb
> print free



Q: How do you use fdisk?

fdisk /dev/sda
m (help/command list)
l    (ELL/list partition types)
n   (add new partition)
p   (primary partition 1-4)
First Cylinder: 7067
Last Cylinder: +33G
w   (write table to disk)



Q: How do you get the system to apply the fdisk changes?

# partprobe OR reboot



Q: How do you create a new filesystem?

# mkfs -t ext4 /dev/sda3



Q: Where is the filesystem table stored?

# vi /etc/fstab
/dev/sda4 /xen ext4 defaults 1 1
Dump Value: 0 or 1
   0 = Ignore.
   1 = Back it up.
Filesystem Check Order:
   0 = Ignore.
   1 = Check Filesystem

# mount -a



Q: How do you remove a Logical Volume?

 # lvremove /dev/vg03/data3



Q: How do you remove a Physical Volume from Volume Group?

# vgreduce vg03 /dev/sda3



Q: How do you delete a Physical Volume?

# pvremove /dev/sda3



Q: What is repquota?

View user disk usage and quotas for file systems.
A user's quotas and number of files and amount of space (in kilobytes) is printed

 Acronym:

FQEQR
- /etc/fstab - defaults,usrquota,grpquota
    # mount -o remount /data3
- quotacheck -cugv /data3 - creates quota config files
- edquota to create a edit user quotas
- quotaon /data3
- repquota -as OR -u /data3



Q: How do you enable User and Group Disk Quota on a filesystem?

# vim /etc/fstab
+++
/dev/vg01/data3         /data3                  ext4    defaults,usrquota,grpquota        1 2
+++

# mount -o remount /data3


# mount | grep /data3
/dev/mapper/vg01-data3 on /data3 type ext4 (rw,relatime,quota,usrquota,grpquota,data=ordered)



Q: How do you create Quota Database Files?

# quotacheck -cugv /data3

-c : create quota file and don't use the existing file
-v : verbose output
-u : user disk quota
-g : group disk quota

Above Command will create aquota.user & aquota.group files under /data3



Q: How do you turn on quota on a filesystem . . . I.E.: /data3?

# quotaon /data3/



Q: How do you assign user & group disk quota?

# edquota -u jsmith
Disk quotas for user jsmith (uid 1002):
  Filesystem                   blocks       soft       hard     inodes     soft     hard
  /dev/mapper/vg01-data3            0       3000       6000          0        0        0


soft : It will warn the users if the soft limit of disk quota reached ( size is in KB), in above example for jack user soft limit is 3000 KB ( approx 3MB )

hard : It will not allow the users to create new files once the hard limit is reached. ( Size in KB ), in above example hard limit for jack user is 6000 KB ( approx 6 MB )

Note : We can also set the Quota on the basis of the inodes ( i.e numbers of files that the user can create on particular file system)



Q: How do you display Quota report for Users in human readable form?

# repquota -as

-a, --all
   Report on all filesystems indicated in /etc/mtab to be read-write with quotas.

-s, --human-readable
   Try to report used space, number of used inodes and limits in more appropriate units than the default ones.



*** Report for user quotas on device /dev/mapper/vg01-data3
Block grace time: 7days; Inode grace time: 7days
                        Space limits                File limits
User            used    soft    hard  grace    used  soft  hard  grace
----------------------------------------------------------------------
root      --    641M      0K      0K           9570     0     0    
dockerroot --  10476K      0K      0K           2212     0     0    
apache    --  25004K      0K      0K             20     0     0    
jsmith    +-   6000K   3000K   6000K  7days       1     0     0  



# repquota -u /data3

-u, --user
    Report quotas for users. This is the default.

*** Report for user quotas on device /dev/mapper/vg01-data3
Block grace time: 7days; Inode grace time: 7days
                        Block limits                File limits
User            used    soft    hard  grace    used  soft  hard  grace
----------------------------------------------------------------------
root      --  655624       0       0           9570     0     0    
dockerroot --   10476       0       0           2212     0     0    
apache    --   25004       0       0             20     0     0    
jsmith    +-    6000    3000    6000  6days       1     0     0

















performance

Q: What is System load/CPU Load?

 A measurement of CPU over or under-utilization in a Linux system; the
number of processes which are being executed by the CPU or in waiting
state. Load average - is the average system load calculated over a
given period of time of 1, 5 and 15 minutes.



Q: What are some performance monitoring tools?

free, iostat, netstat, sar, vmstat



Q: What is vmstat?

Virtual Memory Statistics



Q: What is the format of the vmstat command?

# vmstat 5 5
  vmstat delay count



Q: What is the output of the vmstat command?

   procs    r b
   memory   swap free buff/cache
   swap     si so
   io       bi bo
   system   in cs
   cpu      us sys id wa st



Q: How do you check network port usage?

   netstat
          -a  (port usage)
          -l   (listeningPorts)
          -n  (I.P.'s)
          -p  (processes)
          -r   (routingTable)
          -i   (interface~errors)
          -s  (stats~packetsDropped)



Q: How would you perform a Network Throughput Test?

ftp> put "|dd if=/dev/zero bs=1024k count=1024" /dev/null

















security

Q: Where are the sudoers logs?

*** RedHat ***
/var/log/secure

*** Debian/Ubuntu  ***
/var/log/auth.log



Q: How do you disable login to a user?

/bin/false &  /bin/nologin


Q: How do you restrict root login to console?

# vim  /etc/ssh/sshd_config
+++
#PermitRootLogin yes
PermitRootLogin no
AllowUsers
+++

# systemctl restart ssh



Q: What is pwconv?

Creates /etc/shadow from /etc/passwd.



Q: What is pwunconv?

 Creates /etc/passwd from
/etc/passwd and /etc/shadow and then removes /etc/shadow.



Q: What is grpconv?

 Creates /etc/gshadow from
 /etc/group.



Q: What is grpunconv?

  Creates /etc/group from
 /etc/group and /etc/gshadow and then removes /etc/gshadow.



Q: What is gpasswd?

Administers /etc/group and /etc/gshadow



Q: What is umask?

   'User file creation mask'



Q: What is the umask default?

    022 (Default)

















networking

Q: How do you show IP addresses assigned to all network interfaces?

      $ ip addr show



Q: How do you shows the current neighbor table in kernel?

       $ ip neigh show



Q: How do you bring up interface eth0.

       $ ip link set eth0 up



Q: How do you bring down interface eth0?

       $ ip link set eth0 down



Q: How do you show table routes?

       $ ip route show

















packaging

Q: What is Ubuntu's APT?

Advanced Packaging Tool (APT)



Q: What is RedHat's/Centos's YUM?

Yellow dog Updater, Modified



Q: What is RPM?

RPM Package Manager
Originally: Red-hat Package Manager















mail

Q: Where is a user's mail file located?

The webadmin's mail file is located:
   /var/spool/mail/webadmin

















general

Q: What are three main types of I/O?


binary I/O
raw I/O
text I/O


Q: What is a KERNEL?

     Software on the server that handles
Inter-process Communication,
I/O,
Memory Management,
Networking,
Process and Thread Management,
Security


Q: What is lost+found used for?

   A: fsck puts files from damaged filesystems there.



Q: What is the /proc file system?

   a virtual file system that provides detailed information about Linux kernel, hardware and running processes.
CPU
 -/proc/cpuinfo
 -/proc/interrupts
 -/proc/version

MEMORY
 -/proc/meminfo
 -/proc/swaps
 +/proc/sys/vm/drop_caches

DISK
 +/proc/filesystems
 -/proc/mdstat
 -/proc/mounts
 -/proc/partitions

NETWORKING
 +/proc/net/bonding/bond0


Q: Tell me something about ext2?

    e2fsck


Q: Tell me something about ext3?

    Journaling

















oneoffs

Q: How do you create a file with the date and time appended?

$ touch data.txt.$(date +"%Y%m%d_%H%M%S")

$ ls
data.txt.20190110_180620

$ date
Thu Jan 10 18:06:24 EST 2019



Q: How can you check to see when the server last rebooted?

# last | grep reboot



Q: How can you check the last time a user logged in?

# last | grep jyork



Q:  Create a shell script to add a path.

if ! echo ${PATH} | grep -q /opt/jdk1.8.0_111/bin ; then
   export PATH=/opt/jdk1.8.0_111/bin:${PATH}
fi
